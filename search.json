[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Many Babies 1",
    "section": "",
    "text": "Meta-analysisTrial-levelData\n\n\n\nPlot = import(\"https://esm.sh/@observablehq/plot\")\nfontFamily = \"Source Sans Pro\"\nfontSize = \".75rem\"\n\nd = transpose(forest_data)\n\nmaxX = d3.max(forest_data.effects_cih)\npad = 0.1\n\nmethodIndeces = d3.rollup(\n  d,\n  (values) =&gt; ({Method: values[0].Method, order: d3.min(values, (d) =&gt; d.order)}),\n  (d) =&gt; d.Method\n)\n\nmethod_vals = Array.from(methodIndeces.keys()).filter(x =&gt; x)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof methods = Inputs.checkbox(method_vals, {value: method_vals})\n\n\n\n\n\n\n\nmethodLabels = Array.from(methodIndeces.values()).filter(x =&gt; methods.includes(x.Method))\n\nfd = d.filter(d =&gt; !d.Method | methods.includes(d.Method))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlot.plot({\n  style: { fontFamily: fontFamily }, //, fontSize: fontSize },\n  marginLeft: 130,\n  width: 800,\n  x: {\n    //nice: true,\n    label: \"Effect size\",\n    line: true,\n    //labelAnchor: \"center\",\n    domain: [d3.min(forest_data.effects_cil) - pad, d3.max(forest_data.effects_cih) + pad],\n  },\n  y: {\n    grid: true,\n    line: true,\n    label: \"\",\n    //label: \"Lab\",\n    //labelAnchor: \"top\",\n    padding: 1,\n    type: \"point\",\n    tickFormat: (value) =&gt; {\n      const correspondingData = fd.find((d) =&gt; d.order === value);\n      return correspondingData ? correspondingData.lab : \"\";\n    },\n  },\n//  color: {\n//    range: [\"lime\", \"maroon\", \"blue\"]\n//  },\n  marks: [\n    // Plot.frame(),\n    Plot.ruleX([0], {stroke: \"lightgrey\", strokeDasharray: [3, 3]}),\n    Plot.ruleY(fd.filter(d =&gt; d.meta), {\n      y: \"order\",\n      stroke: \"lightgrey\"\n    }),\n    Plot.ruleX(fd, Plot.pointerY({x: \"effects\", py: \"order\", stroke: \"Method\"})),\n    Plot.ruleY(fd, Plot.pointerY({px: \"effects\", y: \"order\", stroke: \"lightgrey\"})),\n    Plot.link(fd, {\n      y: \"order\",\n      x1: \"effects_cil\",\n      x2: \"effects_cih\"\n    }),\n    Plot.dot(fd, {\n      x: \"effects\",\n      y: \"order\",\n      fill: \"Method\",\n      symbol: (d) =&gt; (d.meta ? \"diamond\" : \"circle\"),\n      r: \"inverse_vars\",\n    }),\n    Plot.text(methodLabels, {\n      x: maxX + 0.1,\n      y: \"order\",\n      text: \"Method\",\n      fill: \"Method\",\n      stroke: \"white\", // Border color\n      strokeWidth: 12,\n      fontWeight: \"bold\",\n      dy: 6,\n      fontSize: 18,\n      textAnchor: \"end\"\n    }),\n    Plot.tip(fd, Plot.pointerY({\n      x: \"effects\",\n      y: \"order\",\n      stroke: \"Method\",\n      channels: {\n        Lab: \"lab\",\n        \"Effect size\": (d) =&gt; d.effects.toFixed(2),\n        CI: (d) =&gt; `[${d.effects_cil.toFixed(2)}, ${d.effects_cih.toFixed(2)}]`,\n        //Method: \"method\"\n      },\n    })),\n  ]\n})\n\n\n\n\n\n\n\n\nThis plot shows fitted values from a mixed effects model predicting looking time [y axis] from trial number [x axis], age [columns], method [rows], trial type [IDS red vs. ADS blue], and language group [NAE dark vs. non-NAE light].\n\nlt = transpose(lt_fits)\nage_groups = [\"3-6 mo\", \"6-9 mo\", \"9-12 mo\", \"12-15 mo\"]\nnae_vals = new Map([[\"North American English (NAE)\", \"NAE\"],\n                    [\"Not North American English (non-NAE)\", \"non-NAE\"]])\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof nae = Inputs.checkbox(nae_vals, {value: Array.from(nae_vals.values())})\n\n\n\n\n\n\n\nltf = lt.filter(d =&gt; nae.includes(d.nae))\n\nPlot.plot({\n  style: { fontFamily: fontFamily }, // fontSize: fontSize },\n  marginRight: 90,\n  width: 800,\n  x: {\n    label: \"Trial number\",\n    //labelAnchor: \"center\",\n    //labelArrow: \"none\",\n    ticks: 4\n  },\n  y: {\n    label: \"Looking time (seconds)\",\n  },\n    //labelAnchor: \"center\",\n    //labelArrow: \"none\", },\n  fx: { label: \"\", domain: age_groups },\n  fy: { label: \"\" },\n  color: {\n    legend: true,\n    //marginLeft: 700,\n    range: [\"#CA0020\", \"#F4A582\", \"#0571B0\", \"#92C5DE\"], // RdBu for 4 values\n    domain: [\"IDS, NAE\", \"IDS, non-NAE\", \"ADS, NAE\", \"ADS, non-NAE\"]\n  },\n  marks: [\n    Plot.line(ltf, {\n      x: \"trial_num\",\n      y: \"fitted\",\n      stroke: \"type_nae\",\n      z: (d) =&gt; `${d.trial_type} + ${d.nae}`,\n      fx: \"age_group\",\n      fy: \"method\",\n    }),\n    Plot.tip(ltf, Plot.pointer({\n      x: \"trial_num\",\n      y: \"fitted\",\n      stroke: \"type_nae\",\n      z: (d) =&gt; `${d.trial_type} + ${d.nae}`,\n      fx: \"age_group\",\n      fy: \"method\",\n      format: { x: null, y: null, fx: null, fy: null, stroke: null },\n      channels: { \"Trial type\": \"trial_type\", \"Language group\": \"nae\" },\n    })),\n  ]\n})"
  }
]