[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "ManyBabies 1",
    "section": "",
    "text": "Meta-analysisAggregated\n\n\n\nPlotData\n\n\n\nForest plot of the meta-analytic results for infant-directed-speech preference. The standardized effect size [x axis] is shown for each lab and age group [y axis]; error bars indicate 95% confidence intervals. Effects are grouped by method [colors]: central fixation, eye tracking, or head-turn preference procedure (HPP). Larger plotted points correspond to greater inverse variance. For each method, the diamond and associated error bars represent the meta-analytic estimate from the method-moderated model and the estimate’s 95% confidence interval. The top diamond shows the global meta-analytic estimate and 95% confidence interval from the unmoderated model.\n\n\nPlot = import(\"https://esm.sh/@observablehq/plot\")\nfontFamily = \"Source Sans Pro\"\nfontSize = \".75rem\"\n\nd = transpose(forest_data)\n\nmaxX = d3.max(forest_data.effects_cih)\npad = 0.1\n\nmethodIndeces = d3.rollup(\n  d,\n  (values) =&gt; ({Method: values[0].Method, order: d3.min(values, (d) =&gt; d.order)}),\n  (d) =&gt; d.Method\n)\n\nmethod_vals = Array.from(methodIndeces.keys()).filter(x =&gt; x)\n\nage_sort = (a, b) =&gt; parseInt(a.split('-')[0], 10) - parseInt(b.split('-')[0], 10)\nage_vals = Array.from(new Set(forest_data.age_group)).filter(d =&gt; d).sort(age_sort)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof methods = Inputs.checkbox(method_vals, {value: method_vals, label: \"Methods\"})\nviewof ages = Inputs.checkbox(age_vals, {value: age_vals, label: \"Age groups\"})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nmethodLabels = Array.from(methodIndeces.values()).filter(x =&gt; methods.includes(x.Method))\n\nfd = d.filter(d =&gt; methods.includes(d.Method))\n      .filter(d =&gt; !d.age_group | ages.includes(d.age_group))\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlot.plot({\n  style: { fontFamily: fontFamily },\n  marginLeft: 155,\n  width: 800,\n  x: {\n    label: \"Effect size\",\n    line: true,\n    domain: [d3.min(forest_data.effects_cil) - pad, d3.max(forest_data.effects_cih) + pad],\n  },\n  y: {\n    grid: true,\n    line: true,\n    label: \"Lab and age group\",\n    labelAnchor: \"top\",\n    padding: 1,\n    type: \"point\",\n    fontVariant: (d) =&gt; d.meta ? \"small-caps\" : \"normal\",\n    tickFormat: (value) =&gt; fd.find((d) =&gt; d.order === value).y_label,\n  },\n  marks: [\n    Plot.ruleX([0], {stroke: \"lightgrey\", strokeDasharray: [3, 3]}),\n    Plot.ruleY(fd.filter(d =&gt; d.meta), {\n      y: \"order\",\n      stroke: \"lightgrey\"\n    }),\n    Plot.ruleX(fd, Plot.pointerY({x: \"effects\", py: \"order\", stroke: \"Method\"})),\n    Plot.ruleY(fd, Plot.pointerY({px: \"effects\", y: \"order\", stroke: \"lightgrey\"})),\n    Plot.link(fd, {\n      y: \"order\",\n      x1: \"effects_cil\",\n      x2: \"effects_cih\"\n    }),\n    Plot.dot(fd.filter(d =&gt; d.meta), {\n      x: \"effects\",\n      y: \"order\",\n      stroke: \"Method\",\n      fill: \"white\",\n      symbol: \"diamond\",\n      strokeWidth: 2,\n      r: \"inverse_vars\",\n    }),\n    Plot.dot(fd.filter(d =&gt; !d.meta), {\n      x: \"effects\",\n      y: \"order\",\n      stroke: \"Method\",\n      fill: \"Method\",\n      symbol: \"circle\",\n      strokeWidth: 2,\n      r: \"inverse_vars\",\n    }),\n    Plot.text(methodLabels.filter((d) =&gt; d.Method == \"(Global)\"), {\n      x: maxX + 0.1,\n      y: \"order\",\n      text: \"Method\",\n      fill: \"Method\",\n      stroke: \"white\",\n      strokeWidth: 12,\n      fontWeight: \"bold\",\n      dy: -6,\n      fontSize: 18,\n      textAnchor: \"end\"\n    }),\n    Plot.text(methodLabels.filter((d) =&gt; d.Method !== \"(Global)\"), {\n      x: maxX + 0.1,\n      y: \"order\",\n      text: \"Method\",\n      fill: \"Method\",\n      stroke: \"white\",\n      strokeWidth: 12,\n      fontWeight: \"bold\",\n      dy: 6,\n      fontSize: 18,\n      textAnchor: \"end\"\n    }),\n    Plot.tip(fd, Plot.pointerY({\n      x: \"effects\",\n      y: \"order\",\n      stroke: \"Method\",\n      format: { y: null },\n      channels: {\n        Lab: \"lab\",\n        \"Age group\": \"age_group\",\n        \"Effect size\": (d) =&gt; d.effects.toFixed(2),\n        CI: (d) =&gt; `[${d.effects_cil.toFixed(2)}, ${d.effects_cih.toFixed(2)}]`,\n      },\n    })),\n  ]\n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlotData\n\n\n\nThe lines on this plot shows fitted values from a mixed effects model predicting looking time [y axis] from trial number [x axis], age [columns], method [rows], trial type [IDS red vs. ADS blue], and language group [NAE dark vs. non-NAE light].\n\n\nlt = transpose(lt_fits)\nage_groups = [\"3-6 mo\", \"6-9 mo\", \"9-12 mo\", \"12-15 mo\"]\nnae_vals = new Map([[\"North American English (NAE)\", \"NAE\"],\n                    [\"Not North American English (non-NAE)\", \"non-NAE\"]])\n                    \ntd = transpose(trial_data)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nviewof points = Inputs.toggle({label: \"Show data points\"})\n\nviewof nae = Inputs.checkbox(nae_vals, {value: Array.from(nae_vals.values())})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nltf = lt.filter(d =&gt; nae.includes(d.nae))\ntdf = td.filter(d =&gt; nae.includes(d.nae))\n\nPlot.plot({\n  style: { fontFamily: fontFamily },\n  marginRight: 90,\n  width: 800,\n  x: { label: \"Trial number\", ticks: 4 },\n  y: {\n    label: \"Looking time (seconds)\",\n    domain: [d3.min(trial_data.looking_time), d3.max(trial_data.looking_time)]\n  },\n  fx: { label: \"\", domain: age_groups },\n  fy: { label: \"\" },\n  color: {\n    legend: true,\n    range: [\"#CA0020\", \"#F4A582\", \"#0571B0\", \"#92C5DE\"], // RdBu for 4 values\n    domain: [\"IDS, NAE\", \"IDS, non-NAE\", \"ADS, NAE\", \"ADS, non-NAE\"]\n  },\n  marks: [\n    Plot.dot(points ? tdf : [], {\n      x: \"trial_num\",\n      y: \"looking_time\",\n      fill: \"type_nae\",\n      fx: \"age_group\",\n      fy: \"method\",\n      opacity: 0.4,\n      r: 1\n    }),\n    Plot.line(ltf, {\n      x: \"trial_num\",\n      y: \"fitted\",\n      stroke: \"type_nae\",\n      z: (d) =&gt; `${d.trial_type} + ${d.nae}`,\n      fx: \"age_group\",\n      fy: \"method\",\n    }),\n    Plot.tip(ltf, Plot.pointer({\n      x: \"trial_num\",\n      y: \"fitted\",\n      stroke: \"type_nae\",\n      z: (d) =&gt; `${d.trial_type} + ${d.nae}`,\n      fx: \"age_group\",\n      fy: \"method\",\n      format: { x: null, y: null, fx: null, fy: null, stroke: null },\n      channels: { \"Trial type\": \"trial_type\", \"Language group\": \"nae\" },\n    })),\n  ]\n})"
  }
]